{% extends "layout.html" %}

{% block content %}
    <h1>Choose your Placements</h1>
    <p>Choose from over 10.000 placement domains.</p>
    <form method="post">


        <div class="form-floating mb-4">
            <select class="form-select" id="floatingSelect" aria-label="Floating label select example" name="tld">
                <option value="{{ tlds[0] }}" selected>{{ tlds[0] }}</option>
                {% for tld in tlds[1:]|sort %}
                    <option value="{{ tld }}">{{ tld }}</option>
                {% endfor %}
            </select>
            <label for="floatingSelect">Choose your Top Level Domain</label>
        </div>


        <div class="row g-2 mb-4">
            <div class="col-md">
                <div class="form-floating">
                    <select class="form-select" id="topic" aria-label="Floating label select example" name="topic">

                        <option value="{{ topics1[0] }}" selected>{{ topics1[0] }}</option>
                        {% for topic in topics1[1:]|sort %}
                            <option value="{{ topic }}">{{ topic }}</option>
                        {% endfor %}

                    </select>
                    <label for="topic">Choose a category</label>
                </div>
            </div>
            <div class="col-md">
                <div class="form-floating">
                    <select class="form-select" id="topic2" aria-label="Floating label select example"
                            name="topic2">
                    </select>
                    <label for="topic2">Choose a category</label>
                </div>
            </div>
        </div>


        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
    <script>
        $('#topic').change(function () {
            var topic = this.value
            $.getJSON('/data', function(data) {
            var data = data.filter(a => a.cat1 == topic)

$('#topic2').empty()
                        $.each(data, function (i, item) {
    $('#topic2').append($('<option>', {
        value: item.cat2,
        text : item.cat2
    }));
});




            })
        })




    </script>
{% endblock %}